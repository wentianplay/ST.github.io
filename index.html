<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>åšæ¢¦å˜æˆæ­£å¤ªæ¨¡æ‹Ÿå™¨</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: #f0f8ff;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }

        #game-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .status-bar {
            display: flex;
            margin-bottom: 20px;
            gap: 15px;
        }

        .status-item {
            background: #e6f3ff;
            padding: 10px;
            border-radius: 8px;
            min-width: 120px;
        }

        .progress-bar {
            width: 200px;
            height: 20px;
            background: #eee;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: #66ccff;
            transition: width 0.3s ease;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: #66ccff;
            color: white;
            cursor: pointer;
            transition: transform 0.2s;
        }

        button:hover {
            transform: scale(1.05);
            background: #4db8ff;
        }

        #event-log {
            height: 200px;
            overflow-y: auto;
            background: #f8f8f8;
            padding: 10px;
            border-radius: 8px;
        }

        .event-item {
            margin: 5px 0;
            padding: 8px;
            background: white;
            border-radius: 5px;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <h1>âœ¨ åšæ¢¦å˜æˆæ­£å¤ªæ¨¡æ‹Ÿå™¨ âœ¨</h1>
        <div class="status-bar">
            <div class="status-item">
                <div>ä½“åŠ›å€¼: <span id="stamina">100</span></div>
                <div class="progress-bar">
                    <div class="progress" id="stamina-bar" style="width: 100%"></div>
                </div>
            </div>
            <div class="status-item">
                <div>æ­£å¤ªåŒ–è¿›åº¦: <span id="progress">0</span>%</div>
                <div class="progress-bar">
                    <div class="progress" id="progress-bar" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <button onclick="takeAction('sleep')">ğŸ’¤ ç¡è§‰</button>
            <button onclick="takeAction('imagine')">ğŸŒˆ æƒ³è±¡</button>
            <button onclick="takeAction('play')">ğŸ® ç©æ¸¸æˆ</button>
            <button onclick="takeAction('drink')">ğŸ¥› å–ç‰›å¥¶</button>
        </div>

        <div id="event-log"></div>
    </div>

    <script>
        let gameState = {
            stamina: 100,
            shotaProgress: 0,
            days: 0
        }

        const events = [
            { 
                trigger: 'sleep',
                messages: [
                    "ä½ èœ·ç¼©åœ¨è½¯è½¯çš„åºŠä¸Šï¼Œæ¢¦è§è‡ªå·±ç©¿ä¸Šäº†å¯çˆ±çš„ç¡è¡£...",
                    "åœ¨æ¢¦å¢ƒä¸­ï¼Œä½ å‘ç°è‡ªå·±å˜å°äº†...",
                    "æœˆå…‰ä¸‹ï¼Œä½ çš„å¤´å‘ä¼¼ä¹å˜æŸ”è½¯äº†ä¸€äº›..."
                ],
                effect: { stamina: +30, progress: +5 }
            },
            {
                trigger: 'imagine',
                messages: [
                    "ä½ å¹»æƒ³ç€ç©¿ç€å®½æ¾çš„å«è¡£å’Œå°çŸ­è£¤...",
                    "è„‘æµ·ä¸­æµ®ç°å‡ºè‡ªå·±ç”¨èŒèŒçš„å£°éŸ³è¯´è¯çš„æ ·å­...",
                    "ä½ æƒ³è±¡ç€è‡ªå·±æŠ±ç€æ¯›ç»’ç©å…·å…¥ç¡..."
                ],
                effect: { stamina: -15, progress: +8 }
            },
            {
                trigger: 'play',
                messages: [
                    "å’Œæƒ³è±¡ä¸­çš„æœ‹å‹ç©æ‰è¿·è—ï¼Œä½“åŠ›æ¶ˆè€—ä½†å¾ˆå¼€å¿ƒï¼",
                    "ç©ç”µå­æ¸¸æˆæ—¶ï¼Œå‘ç°è‡ªå·±ååº”é€Ÿåº¦å˜å¿«äº†...",
                    "æ­ç§¯æœ¨æ—¶åŠ¨ä½œå˜å¾—ç¬¨æ‹™å¯çˆ±..."
                ],
                effect: { stamina: -20, progress: +3 }
            },
            {
                trigger: 'drink',
                messages: [
                    "å’•å˜Ÿå’•å˜Ÿå–ä¸‹ç‰›å¥¶ï¼Œå˜´è§’æ²¾ä¸Šäº†ç™½èƒ¡å­...",
                    "æ§ç€å¤§å¤§çš„æ¯å­å–å¥¶çš„æ ·å­æœ‰ç‚¹å¯çˆ±...",
                    "è¡¥å……é’™è´¨æœ‰åŠ©äºé•¿é«˜ï¼Ÿä½†ä¼¼ä¹åæ•ˆæœ..."
                ],
                effect: { stamina: +10, progress: +2 }
            }
        ]

        function updateDisplay() {
            document.getElementById('stamina').textContent = gameState.stamina;
            document.getElementById('stamina-bar').style.width = `${gameState.stamina}%`;
            document.getElementById('progress').textContent = gameState.shotaProgress;
            document.getElementById('progress-bar').style.width = `${gameState.shotaProgress}%`;
            
            // å½“ä½“åŠ›ä½äº30%æ—¶é—ªçƒæç¤º
            document.getElementById('stamina-bar').style.animation = 
                gameState.stamina <= 30 ? 'pulse 1s infinite' : 'none';
        }

        function addEventMessage(message) {
            const log = document.getElementById('event-log');
            const newEvent = document.createElement('div');
            newEvent.className = 'event-item';
            newEvent.textContent = `ç¬¬${++gameState.days}å¤©: ${message}`;
            
            log.appendChild(newEvent);
            // ä¿æŒæ—¥å¿—æ•°é‡ä¸è¶…è¿‡10æ¡
            while (log.children.length > 10) {
                log.removeChild(log.firstChild);
            }
            log.scrollTop = log.scrollHeight;
        }

        function getRandomEvent(actionType) {
            const actionEvents = events.find(e => e.trigger === actionType);
            return {
                message: actionEvents.messages[Math.floor(Math.random() * actionEvents.messages.length)],
                effect: actionEvents.effect
            };
        }

        function checkGameEnd() {
            if (gameState.shotaProgress >= 100) {
                alert('ğŸ‰ æ­å–œï¼ä½ å®Œå…¨å˜æˆäº†èŒèŒçš„æ­£å¤ªï¼');
                resetGame();
                return true;
            }
            if (gameState.stamina <= 0) {
                alert('ğŸ˜´ ä½“åŠ›è€—å°½ï¼Œå˜å›æ™®é€šäººäº†...');
                resetGame();
                return true;
            }
            return false;
        }

        function resetGame() {
            gameState = { stamina: 100, shotaProgress: 0, days: 0 };
            document.getElementById('event-log').innerHTML = '';
            updateDisplay();
        }

        function takeAction(actionType) {
            if (checkGameEnd()) return;

            const event = getRandomEvent(actionType);
            gameState.stamina = Math.max(0, Math.min(100, 
                gameState.stamina + event.effect.stamina));
            gameState.shotaProgress = Math.max(0, Math.min(100,
                gameState.shotaProgress + event.effect.progress));
            
            addEventMessage(event.message);
            updateDisplay();
            
            // éšæœºè§¦å‘ç‰¹æ®Šäº‹ä»¶
            if (Math.random() < 0.2) {
                const specialEvents = [
                    "é‡åˆ°ä¸€åªå°çŒ«ï¼Œä½ çš„èŒåº¦å¢åŠ äº†ï¼",
                    "ä¸å°å¿ƒè¢«å½“æˆå°å­©å­æ‘¸å¤´äº†ï¼",
                    "å‘ç°è‡ªå·±çš„è¡£æœéƒ½å˜å¤§äº†ï¼"
                ];
                addEventMessage(specialEvents[Math.floor(Math.random() * specialEvents.length)]);
                gameState.shotaProgress += 3;
            }

            checkGameEnd();
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        updateDisplay();
    </script>
</body>
</html>
